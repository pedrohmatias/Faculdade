#include <stdio.h>
#include <locale.h>
#include <stdbool.h>
#include <stdlib.h>
struct onibus
{
    int numeroOnibus, numeroCidades, codigoCidades[24], distanciaTotal;
};
int main()
{
    struct onibus *infoOnibus = NULL;
    bool continuar = true;
    int k = 0, totalOnibus = 0;
    int cidadeAtual, cidadeAnterior;

    // essa matriz aqui eu gerei com I.A, deus me livre escrever tudo isso na mão.
    int distancias[30][30] = {
    {  0, 15, 10, 18, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50, 45},
    { 15,  0, 25, 42, 50, 20, 35, 45, 55, 65, 75, 70, 60, 55, 50, 45, 40, 35, 30, 25, 20, 30, 40, 50, 55, 60, 65, 70, 75, 80},
    { 10, 25,  0, 12, 15, 22, 33, 44, 55, 60, 65, 55, 50, 45, 40, 35, 30, 25, 20, 15, 10, 20, 30, 40, 50, 55, 60, 65, 70, 75},
    { 18, 42, 12,  0,  8, 18, 28, 38, 48, 58, 68, 65, 60, 55, 50, 45, 40, 35, 30, 25, 20, 30, 40, 50, 60, 65, 70, 75, 80, 85},
    { 20, 50, 15,  8,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30, 25, 20, 15, 10, 20, 30, 40, 50, 55, 60, 65, 70, 75},
    { 25, 20, 22, 18, 10,  0, 15, 25, 35, 45, 55, 50, 45, 40, 35, 30, 25, 20, 15, 10, 20, 25, 35, 45, 50, 55, 60, 65, 70, 75},
    { 30, 35, 33, 28, 20, 15,  0, 10, 20, 30, 40, 45, 40, 35, 30, 25, 20, 15, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30},
    { 35, 45, 44, 38, 30, 25, 10,  0, 10, 20, 30, 40, 50, 45, 40, 35, 30, 25, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30, 25},
    { 40, 55, 55, 48, 40, 35, 20, 10,  0, 15, 25, 35, 45, 40, 35, 30, 25, 20, 15, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35},
    { 45, 65, 60, 58, 50, 45, 30, 20, 15,  0, 10, 20, 30, 25, 20, 15, 10, 20, 30, 40, 50, 55, 60, 50, 45, 40, 35, 30, 25, 20},
    { 50, 75, 65, 68, 60, 55, 40, 30, 25, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30, 25, 20, 15, 10, 20, 30, 40},
    { 55, 70, 55, 65, 55, 50, 45, 40, 35, 20, 10,  0, 10, 20, 30, 40, 50, 45, 40, 35, 30, 25, 20, 30, 40, 50, 60, 55, 50, 45},
    { 60, 60, 50, 60, 50, 45, 40, 50, 45, 30, 20, 10,  0, 10, 20, 30, 40, 35, 30, 25, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35},
    { 65, 55, 45, 55, 45, 40, 35, 45, 40, 25, 30, 20, 10,  0, 10, 20, 30, 25, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30, 25},
    { 70, 50, 40, 50, 40, 35, 30, 40, 35, 20, 40, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30, 25, 20, 15},
    { 75, 45, 35, 45, 35, 30, 25, 35, 30, 15, 50, 40, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30, 25, 20},
    { 80, 40, 30, 40, 30, 25, 20, 30, 25, 10, 60, 50, 40, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30, 25},
    { 85, 35, 25, 35, 25, 20, 15, 25, 20, 20, 55, 45, 35, 25, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35, 30},
    { 90, 30, 20, 30, 20, 15, 10, 20, 15, 30, 50, 40, 30, 20, 30, 40, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40, 35},
    { 95, 25, 15, 25, 15, 10, 20, 30, 10, 40, 45, 35, 25, 30, 40, 50, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45, 40},
    { 90, 20, 10, 20, 10, 20, 30, 40, 20, 50, 40, 30, 20, 40, 50, 60, 40, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50, 45},
    { 85, 30, 20, 30, 20, 25, 40, 50, 30, 55, 35, 25, 30, 50, 55, 60, 50, 40, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55, 50},
    { 80, 40, 30, 40, 30, 35, 50, 60, 40, 60, 30, 20, 40, 60, 60, 55, 60, 50, 40, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60, 55},
    { 75, 50, 40, 50, 40, 45, 60, 55, 50, 50, 25, 30, 50, 55, 50, 45, 55, 60, 50, 40, 30, 20, 10,  0, 10, 20, 30, 40, 50, 60},
    { 70, 55, 50, 60, 50, 50, 55, 50, 55, 45, 20, 40, 60, 50, 45, 40, 50, 55, 60, 50, 40, 30, 20, 10,  0, 10, 20, 30, 40, 50},
    { 65, 60, 55, 65, 55, 55, 50, 45, 50, 40, 15, 50, 55, 45, 40, 35, 45, 50, 55, 60, 50, 40, 30, 20, 10,  0, 10, 20, 30, 40},
    { 60, 65, 60, 70, 60, 60, 45, 40, 45, 35, 10, 60, 50, 40, 35, 30, 40, 45, 50, 55, 60, 50, 40, 30, 20, 10,  0, 10, 20, 30},
    { 55, 70, 65, 75, 65, 65, 40, 35, 40, 30, 20, 55, 45, 35, 30, 25, 35, 40, 45, 50, 55, 60, 50, 40, 30, 20, 10,  0, 10, 20},
    { 50, 75, 70, 80, 70, 70, 35, 30, 35, 25, 30, 50, 40, 30, 25, 20, 30, 35, 40, 45, 50, 55, 60, 50, 40, 30, 20, 10,  0, 10},
    { 45, 80, 75, 85, 75, 75, 30, 25, 30, 20, 40, 45, 35, 25, 20, 15, 25, 30, 35, 40, 45, 50, 55, 60, 50, 40, 30, 20, 10,  0}
    };
    do
    {
        if (k >= totalOnibus)
        {
            totalOnibus += 1;
            infoOnibus = (struct onibus *)realloc(infoOnibus, totalOnibus * sizeof(struct onibus));
            if (infoOnibus == NULL)
            {
                printf("Erro na alocação de memória!\n");
                return 1; 
            }
        }
        printf("Informe o número do ônibus: ");
        scanf("%d", &infoOnibus[k].numeroOnibus);
        printf("Informe o número de cidades percorridas: ");
        scanf("%d", &infoOnibus[k].numeroCidades);
        while (infoOnibus[k].numeroCidades > 24)
        {
            printf("número máximo de cidades excedido, insira um número válido: ");
            scanf("%d", &infoOnibus[k].numeroCidades);
        }
        infoOnibus[k].distanciaTotal = 0;
        for (int l = 0; l < infoOnibus[k].numeroCidades; l++){
            printf("informe o código da %d° cidade: ", l + 1);
            scanf("%d", &infoOnibus[k].codigoCidades[l]);
            if (l > 0)
            {
                int cidadeAnterior = infoOnibus[k].codigoCidades[l - 1];
                int cidadeAtual = infoOnibus[k].codigoCidades[l];
                infoOnibus[k].distanciaTotal += distancias[cidadeAnterior][cidadeAtual];
            }
        }
        k++;
        printf("deseja informar as informações de outro ônibus?: 1-sim 0-não: ");
        scanf(" %d", &continuar);
    } while (continuar);
    for (k = 0; k < totalOnibus; k++){
        printf("número do %d° ônibus: %d \n",k+1, infoOnibus[k].numeroOnibus);
        printf("distância total percorrida: %d \n",infoOnibus[k].distanciaTotal);
        printf("\n");
    }
};